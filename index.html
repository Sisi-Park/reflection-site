<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Reflection Companion</title>
  <meta name="description" content="A minimalist reflection companion — track thoughts, goals, and progress privately." />
  <style>
    /* Apple‑inspired, black & white, less‑is‑more */
    :root{ --bg:#ffffff; --text:#0a0a0a; --muted:#6b7280; --line:#e5e7eb; --card:#ffffff; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Inter,system-ui,Arial,sans-serif;line-height:1.5}
    .container{max-width:960px;margin:0 auto;padding:28px}
    header{display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:700;letter-spacing:.1px}
    .pill{font-size:12px;color:var(--muted);border:1px solid var(--line);padding:6px 10px;border-radius:999px}
    .hero{margin:32px 0 20px;padding:28px;border:1px solid var(--line);border-radius:16px;background:var(--card)}
    .hero h1{margin:0 0 6px;font-size:clamp(28px,5vw,40px);font-weight:700}
    .hero p{margin:0;color:var(--muted)}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:14px}
    .btn{appearance:none;border:1px solid #111;background:#111;color:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.secondary{background:transparent;color:#111}
    .btn.ghost{border-color:var(--line);background:transparent;color:#111}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 12;border:1px solid var(--line);border-radius:16px;background:var(--card);padding:16px}
    @media(min-width:860px){.span-6{grid-column:span 6}}

    h2{margin:4px 0 10px;font-size:18px}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type=text],textarea{width:100%;background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px 12px;font-size:14px}
    textarea{min-height:92px;resize:vertical}
    input:focus,textarea:focus{outline:none;border-color:#111;box-shadow:0 0 0 2px rgba(0,0,0,.04)}

    .tag{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:6px 10px;color:var(--muted);font-size:12px}
    .list{list-style:none;margin:8px 0 0;padding:0}
    .list li{display:flex;gap:8px;align-items:center;padding:10px 0;border-top:1px solid var(--line)}
    .list li:first-child{border-top:none}
    .check{width:18px;height:18px}

    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .metric{border:1px solid var(--line);border-radius:12px;padding:12px;text-align:center}
    .val{font-weight:700;font-size:22px}

    footer{margin:28px 0 0;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand" id="siteTitle">Daily Reflection Companion</div>
      <div class="pill" id="todayLabel"></div>
    </header>

    <section class="hero">
      <h1>Clarity, one small step.</h1>
      <p>Minimal, private, and fast. Your notes live with you.</p>
      <div class="row">
        <button class="btn" id="exportBtn">Export JSON</button>
        <button class="btn secondary" id="importBtn">Import JSON</button>
        <input type="file" id="importFile" accept="application/json" style="display:none"/>
        <button class="btn ghost" id="chooseFileBtn">Choose Data File…</button>
        <button class="btn ghost" id="openFileBtn">Open Data File…</button>
        <label class="tag" style="gap:8px"><input type="checkbox" id="autoSaveToggle"/> Auto‑save</label>
      </div>
    </section>

    <section class="grid">
      <div class="card span-6">
        <h2>Today</h2>
        <label for="reflection">What stood out to me</label>
        <textarea id="reflection" placeholder="One or two sentences is enough…"></textarea>
        <div class="row"><button class="btn" id="saveReflection">Save</button><span class="tag" id="savedAt"></span></div>
      </div>

      <div class="card span-6">
        <h2>History</h2>
        <label for="historySelect">Browse past entries</label>
        <div class="row" style="margin-top:0">
          <button class="btn ghost" id="prevDay" title="Previous day">◀</button>
          <select id="historySelect" aria-label="Saved dates"></select>
          <button class="btn ghost" id="nextDay" title="Next day">▶</button>
        </div>
        <label style="margin-top:10px">Reflection (read‑only)</label>
        <textarea id="historyText" readonly placeholder="Select a date to view past reflection"></textarea>
        <label style="margin-top:10px">Mini‑Experiment (read‑only)</label>
        <input id="historyExperiment" type="text" readonly placeholder="No mini‑experiment saved for this day" />
      </div>

      <div class="card span-6">
        <h2>Mini‑Experiment</h2>
        <label for="experiment">One tiny action for tomorrow</label>
        <input id="experiment" type="text" placeholder="e.g., Publish to GitHub Pages" />
        <div class="row"><button class="btn secondary" id="markDone">Mark today done</button><span class="tag" id="streakTag">Streak: 0</span></div>
      </div>

      <div class="card span-6">
        <h2>Goals</h2>
        <label for="goalShort">Short‑term (1–4 weeks)</label>
        <input id="goalShort" type="text" />
        <label for="goalLong" style="margin-top:8px">Long‑term (3–6 months)</label>
        <input id="goalLong" type="text" />
      </div>

      <div class="card span-6">
        <h2>Progress</h2>
        <ul class="list" id="progressList">
          <li><input class="check" type="checkbox" data-key="title" />Title options drafted</li>
          <li><input class="check" type="checkbox" data-key="features" />3 features outlined</li>
          <li><input class="check" type="checkbox" data-key="audience" />Audience defined</li>
          <li><input class="check" type="checkbox" data-key="landing" />Landing page created</li>
          <li><input class="check" type="checkbox" data-key="share" />Shared with 1 friend</li>
        </ul>
      </div>

      <div class="card span-6">
        <h2>SWOT</h2>
        <div class="grid" style="gap:10px">
<div class="card span-6" style="padding:12px">
  <label>Strengths</label>
  <textarea id="swotS">• Resilient & consistent: daily reflection and progress tracking
• Analytical & structured: systems thinking, data-driven
• Cross-cultural experience: Korea + U.S., MBA + DBA
• Creative but pragmatic: idea generation + execution
• Self-aware & reflective: learns from patterns</textarea>
</div>

<div class="card span-6" style="padding:12px">
  <label>Weaknesses</label>
  <textarea id="swotW">• Perfectionism at last mile: polishing before publishing
• Procrastination loops: priorities known but not acted in order
• Emotional weight: relationship stress, anxiety drains energy
• Fragmented focus: many ideas risk scattering energy
• Overwork as coping: effort driven by stress not always strategy</textarea>
</div>

<div class="card span-6" style="padding:12px">
  <label>Opportunities</label>
  <textarea id="swotO">• Personal branding: portfolio site + reflection as proof
• Tech leverage: AI + data science + fashion expertise
• Content creation: dashboards → posts, LinkedIn, book
• Career transitions: HR, marketing, data roles open
• Entrepreneurial niche: minimalist growth tools as product</textarea>
</div>

<div class="card span-6" style="padding:12px">
  <label>Threats</label>
  <textarea id="swotT">• Burnout: high effort + emotional stress risk exhaustion
• Imposter syndrome: questioning self can block momentum
• Competition: tech/fashion move fast, delay costs
• Immigration status & stability: visa/green card stress
• Overthinking vs. action: reflection can paralyze execution</textarea>
</div>
        </div>
      </div>

      <div class="card span-6">
        <h2>Stats</h2>
        <div class="kpi">
          <div class="metric"><div class="val" id="daysUsed">0</div><div class="muted">days used</div></div>
          <div class="metric"><div class="val" id="streak">0</div><div class="muted">streak</div></div>
          <div class="metric"><div class="val" id="completed">0</div><div class="muted">items done</div></div>
        </div>
      </div>
    </section>

    <footer>Built to be calm. Your data stays with you.</footer>
  </div>

  <script>
    const $ = (sel)=>document.querySelector(sel);
    const storageKey='drc_data_v1';
    const defaultData={
      notes:{},
      goals:{ short:"한 주에 3번 업데이트", long:"3개월 내 MVP 오픈" },
      progress:{ title:true, features:true, audience:true },
      swot: {
  S: "• Resilient & consistent: daily reflection and progress tracking\n• Analytical & structured: systems thinking, data-driven\n• Cross-cultural experience: Korea + U.S., MBA + DBA\n• Creative but pragmatic: idea generation + execution\n• Self-aware & reflective: learns from patterns",
  W: "• Perfectionism at last mile: polishing before publishing\n• Procrastination loops: priorities known but not acted in order\n• Emotional weight: relationship stress, anxiety drains energy\n• Fragmented focus: many ideas risk scattering energy\n• Overwork as coping: effort driven by stress not always strategy",
  O: "• Personal branding: portfolio site + reflection as proof\n• Tech leverage: AI + data science + fashion expertise\n• Content creation: dashboards → posts, LinkedIn, book\n• Career transitions: HR, marketing, data roles open\n• Entrepreneurial niche: minimalist growth tools as product",
  T: "• Burnout: high effort + emotional stress risk exhaustion\n• Imposter syndrome: questioning self can block momentum\n• Competition: tech/fashion move fast, delay costs\n• Immigration status & stability: visa/green card stress\n• Overthinking vs. action: reflection can paralyze execution"
},
      siteTitle:'Daily Reflection Companion',
      preset:{
        titles:['Representing Yourself','Daily Reflection Companion','Self Growth Tool','Lifetime Self Growth','Who Am I'],
        features:['Reminder of SWOT analysis','Long term and short-term goal','Progress status'],
        audience:'for now, just me (practice to build website, manage portfolio, maintain it)'
      },
      daysUsed:0, streak:0, lastDay:null, completed:0
    };

    function todayKey(){return new Date().toISOString().slice(0,10)}
    function load(){try{return JSON.parse(localStorage.getItem(storageKey))||defaultData}catch{return defaultData}}
    let state=load();

    function save(next){state=next;localStorage.setItem(storageKey,JSON.stringify(state));updateUI(state)}
    function updateUI(s){
      $('#todayLabel').textContent=new Date().toLocaleDateString(undefined,{weekday:'short',month:'short',day:'numeric'});
      $('#siteTitle').textContent=s.siteTitle||'Daily Reflection Companion';
      const k=todayKey();
      $('#reflection').value=s.notes[k]?.text||'';
      $('#experiment').value=s.notes[k]?.experiment||'';
      $('#savedAt').textContent=s.notes[k]?.savedAt?`Saved ${new Date(s.notes[k].savedAt).toLocaleTimeString()}`:'';
      $('#goalShort').value=s.goals.short||''; $('#goalLong').value=s.goals.long||'';
      $('#swotS').value = (s.swot?.S ?? defaultData.swot.S) || '';
      $('#swotW').value = (s.swot?.W ?? defaultData.swot.W) || '';
      $('#swotO').value = (s.swot?.O ?? defaultData.swot.O) || '';
      $('#swotT').value = (s.swot?.T ?? defaultData.swot.T) || '';

      document.querySelectorAll('.check').forEach(cb=>cb.checked=!!s.progress[cb.dataset.key]);
      $('#daysUsed').textContent=s.daysUsed||0; $('#streak').textContent=s.streak||0; $('#completed').textContent=s.completed||0; $('#streakTag').textContent=`Streak: ${s.streak||0}`;

      // History (latest→oldest; prefer today)
      const historySelect=$('#historySelect');
      if(historySelect){
        const dates = Object.keys(s.notes||{}).sort((a,b)=>a<b?1:-1);
        historySelect.innerHTML='';
        dates.forEach(d=>{ const opt=document.createElement('option'); opt.value=d; opt.textContent=d; historySelect.appendChild(opt); });
        const preferred = dates.includes(k) ? k : dates[0];
        if (preferred) historySelect.value = preferred;
        const entry = (s.notes||{})[preferred]||{};
        $('#historyText').value = entry.text||'';
        $('#historyExperiment').value = entry.experiment||'';
      }
    }

    function bumpUsage(s){const k=todayKey(); if(s.lastDay!==k){s.daysUsed=(s.daysUsed||0)+1; if(s.lastDay){const d=(new Date(k)-new Date(s.lastDay))/(1000*60*60*24); s.streak=d===1?(s.streak||0)+1:1}else{s.streak=1} s.lastDay=k}}
    bumpUsage(state); save(state);

    // Save reflection & experiment
    $('#saveReflection').addEventListener('click',()=>{const k=todayKey(); state.notes[k]=state.notes[k]||{}; state.notes[k].text=$('#reflection').value.trim(); state.notes[k].experiment=$('#experiment').value.trim(); state.notes[k].savedAt=Date.now(); save(state)});
    $('#markDone').addEventListener('click',()=>{state.completed=(state.completed||0)+1; save(state)});

    // Progress checkboxes
    document.querySelectorAll('.check').forEach(cb=>cb.addEventListener('change',()=>{state.progress[cb.dataset.key]=cb.checked; save(state)}));

    // Goals
    $('#goalShort').addEventListener('change',()=>{state.goals.short=$('#goalShort').value.trim(); save(state)});
    $('#goalLong').addEventListener('change',()=>{state.goals.long=$('#goalLong').value.trim(); save(state)});

    // SWOT change listeners
    ['S','W','O','T'].forEach(k=>{const m={S:'#swotS',W:'#swotW',O:'#swotO',T:'#swotT'}[k]; document.querySelector(m).addEventListener('change',()=>{state.swot[k]=document.querySelector(m).value.trim(); save(state)})});

    // Export / Import
    $('#exportBtn').addEventListener('click',()=>{const blob=new Blob([JSON.stringify(state,null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='daily_reflection_companion_data.json'; a.click(); URL.revokeObjectURL(url)});
    $('#importBtn').addEventListener('click',()=>$('#importFile').click());
    $('#importFile').addEventListener('change',(e)=>{const f=e.target.files[0]; if(!f)return; const r=new FileReader(); r.onload=()=>{try{state=JSON.parse(r.result); save(state)}catch{alert('Invalid JSON')}}; r.readAsText(f)});

    // File System Access API (optional cross-device persistence)
    let fileHandle=null; const auto=$('#autoSaveToggle');
    async function saveToChosenFile(){ if(!fileHandle) return; try{const w=await fileHandle.createWritable(); await w.write(new Blob([JSON.stringify(state,null,2)],{type:'application/json'})); await w.close()}catch(e){console.warn('Save failed',e); alert('Could not save to the chosen file. Try choosing it again.')}}
    async function chooseDataFile(){ if(!window.showSaveFilePicker){alert('Use Chrome/Edge for direct file saving, or Export/Import.'); return} try{fileHandle=await window.showSaveFilePicker({suggestedName:'reflection_data.json',types:[{description:'JSON',accept:{'application/json':['.json']}}]}); await saveToChosenFile(); alert('Chosen file set. Auto‑save will write to it when enabled.')}catch(e){if(e?.name!=='AbortError') console.warn(e)}}
    async function openDataFile(){ if(!window.showOpenFilePicker){alert('Use Chrome/Edge to open files, or Import JSON.'); return} try{const [h]=await window.showOpenFilePicker({types:[{description:'JSON',accept:{'application/json':['.json']}}],multiple:false}); fileHandle=h; const file=await fileHandle.getFile(); const text=await file.text(); state=JSON.parse(text); save(state); alert('Data loaded. Auto‑save can write updates back.')}catch(e){if(e?.name!=='AbortError') alert('Could not open file.')}}
    $('#chooseFileBtn').addEventListener('click',chooseDataFile);
    $('#openFileBtn').addEventListener('click',openDataFile);
    auto.addEventListener('change',()=>{if(auto.checked && !fileHandle) chooseDataFile()});

    const originalSave=save; save=function(next){originalSave(next); if(auto.checked && fileHandle) saveToChosenFile()}

    // History handlers
    function sortedDates(){ return Object.keys(state.notes||{}).sort((a,b)=>a<b?1:-1); }
    function showHistory(date){ if(!date){ $('#historyText').value=''; $('#historyExperiment').value=''; return; } const e=(state.notes||{})[date]||{}; $('#historyText').value=e.text||''; $('#historyExperiment').value=e.experiment||''; const sel=$('#historySelect'); if(sel) sel.value=date; }
    $('#historySelect').addEventListener('change',()=>showHistory($('#historySelect').value));
    $('#prevDay').addEventListener('click',()=>{ const dates=sortedDates(); const sel=$('#historySelect'); if(!dates.length) return; let i=dates.indexOf(sel.value); if(i<dates.length-1) showHistory(dates[i+1]); });
    $('#nextDay').addEventListener('click',()=>{ const dates=sortedDates(); const sel=$('#historySelect'); if(!dates.length) return; let i=dates.indexOf(sel.value); if(i>0) showHistory(dates[i-1]); });
  </script>
</body>
</html>
